#!/bin/bash
# Send Signal K notifications by SMS

COMMAND=gammu

if [ $# -eq 0 ]; then
	echo "Send Signal K notifications by SMS (arguments must be phone numbers)"
	exit 0
fi

if hash ${COMMAND} 2>/dev/null ; then
	MESSAGE=`cat`
	while [ "${1}" != "" ]; do
		#echo "`date` ${MESSAGE} ${COMMAND} sendsms TEXT ${1}" >> /root/.signalk/node_modules/signalk-renotifier/sms.log
		echo "${MESSAGE}" | ${COMMAND} sendsms TEXT ${1}
		shift
	done
	exit 0
else
	>&2 echo "required program '${COMMAND}' is not available"
	exit 1
fi

